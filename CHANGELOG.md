# 更新日志 (CHANGELOG)

所有重要的项目变更都记录在此文件中。

---

## [0.9.3 beta-c] - 2026-01-14

### 新增
- AI 整理功能大幅优化
  - 动态标签管理（在 AI 整理弹窗中管理分类标签）
  - 二次检测机制（自动对无法通过文件名识别的文件进行上下文检测）
  - 系统额外预设提示词（`config.json` 中的 `system_preset` 字段）
  - TPM/RPM 限速配置和批次延迟
  - Temperature 参数可配置
- 报告生成优化
  - 动态分类分组（支持任意自定义标签）
  - 标准编码/无编码分组显示
  - 统一序号列

### 改进
- Prompt 优化
  - 移除硬编码类型，完全使用用户自定义标签
  - 优化编码提取规则（支持无短横格式）
  - 技术化表述减少内容审查触发（但还是建议使用审查宽松的模型来处理NSFW内容）
- 回车键冲突修复（标签输入不再触发目录选择）
- skip 和 needs_context 逻辑优化（互斥处理）

### 修复
- 修复 AI 未返回结果的文件丢失问题（自动进入二次检测）
- 修复自定义标签不生效的问题

---

## [0.9.3 beta-b] - 2026-01-13

### 修复
- 修复无法扫描的问题

---

## [0.9.3 beta-a] - 2026-01-13

### 新增
- 媒体库整理功能（AI 整理按钮）
  - 目录选择向导
  - 文件名智能解析（年份/分辨率/剧集/番号）
  - 蓝光/DVD 原盘识别
  - 硬链接检测
  - AI 辅助识别
  - Markdown 报告生成
  - 统一调用目录索引功能模块进行扫描
  - 统一使用系统扫描配置参数
- 目录索引功能（开始扫描）
  - 增加刷新按钮
  - 增加终端日志输出

### 改进
- 目录索引功能
  - 优化长文件路径支持
  - 程序扫描之后的文件计数可能和真实值不一样，因为是文件 + 目录总数，真实值不包含目录的数量
  - 优化目录树显示，提高可读性

### 修复
- 目录索引功能
  - 解决漏扫问题
  - 修复个别含俄语文件的显示问题，原调用方法可能导致文件不显示
---

## [0.9.2] - 2026-01-09

### 新增
- HTML 导出功能
  - 目录树 + 文件列表双栏界面
  - 搜索支持文件名和文件夹名
  - 表头点击排序（名称/大小/修改时间）
  - 文件夹点击跳转
  - 前进后退导航（鼠标侧键、Alt+方向键）
  - 主题切换（浅色/深色/跟随系统）
  - 底部状态栏显示当前文件夹统计和路径

### 改进
- CSV 导出添加进度弹窗
- 搜索需点击按钮或回车才执行
- 清除按钮智能返回搜索前位置

### 修复
- 修复导出 SQL 查询错误
- 修复点击箭头会切换内容的问题

---

## [0.9.1] - 2026-01-06

### 修复
- 修复 CSV/HTML 导出的数据库表名和列名错误

---

## [0.9.0] - 2026-01-05

### 新增
- CSV 导出功能
- 专用导出进度对话框

---

## [0.8.0] - 2026-01-03

### 新增
- 数据库优化（WAL 模式、批量插入）
- 扫描内存优化

---

## [0.1.0] - 初始版本

### 新增
- 基础文件扫描功能
- SQLite 数据库存储
- 多目录扫描支持
- 快速搜索
- 目录树浏览
- 数据库备份与恢复

---

## 版本说明

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。
